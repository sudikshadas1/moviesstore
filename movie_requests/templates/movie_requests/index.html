{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2>Request a Movie</h2>

  <form method="post" class="mb-4">
    {% csrf_token %}
    {{ form.as_p }}
    <button class="btn btn-dark" type="submit">Add Request</button>
  </form>

  <hr>
  <h3>My Requests</h3>
  {% if requests %}
    <ul class="list-group">
      {% for r in requests %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          <div>
            <strong>{{ r.movie_name }}</strong><br>
            <small class="text-muted">{{ r.created_at }}</small><br>
            {{ r.movie_description }}
          </div>
          <form method="post" action="{% url 'movie_requests:delete' r.id %}">
            {% csrf_token %}
            <button class="btn btn-sm btn-danger">Delete</button>
          </form>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No requests yet.</p>
  {% endif %}
</div>
{% endblock %}